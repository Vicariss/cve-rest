from marshmallow import Schema, fields, validate, ValidationError


def validate_password(password):
    if any(char.isdigit() for char in password) and any(char.isupper() for char in password):
        pass
    else:
        raise ValidationError(message="Password must contain at least one uppercase character and one number.")
    

class UserSchema(Schema):
    username = fields.Str(validate=validate.And(
        validate.Length(min=5, max=30, error="Username must be at least 4 characters long.")))
    password = fields.Str(validate=validate.And(
        validate.Length(min=8, max=30, error="Password must be at least 8 characters long."), validate_password))



